<ng-template [appLoadingObservables]="[skillLoaded]">
  <div class="l-stickyBar" *ngIf="richSkill; else noSkill">
    <div class="l-stickySidebar l-container t-margin-medium t-margin-bottom">

      <div class="l-stickySidebar-x-content t-padding-medium t-padding-top">
        <app-detail-card
          [sections]="getCardFormat()"
          [title]="getSkillName()"
          titleLabel="Rich Skill Descriptor"
          [authors]="getAuthors()"
          [archivedDate]="getArchivedDate()"
          [publishedDate]="getPublishedDate()"
          [status]="getPublishStatus()"
        ></app-detail-card>
      </div>

      <div class="l-stickySidebar-x-sidebar t-hidden-desktopMax">
        <div class="l-stickySidebar-x-sidebarContent t-padding-medium t-padding-top">
          <app-public-skill-action-bar-vertical
            [skillUuid]="getSkillUuid()"
            [skillName]="getSkillName()"
            [skillUrl]="getSkillUrl()"
          ></app-public-skill-action-bar-vertical>
        </div>
      </div>

    </div>

    <div class="l-stickyBar-x-bar t-hidden-desktopMin t-padding-medium t-padding-top">
      <app-public-skill-action-bar-horizontal
        [skillUuid]="getSkillUuid()"
        [skillName]="getSkillName()"
        [skillUrl]="getSkillUrl()"
      ></app-public-skill-action-bar-horizontal>
    </div>
  </div>
  <ng-template #noSkill>
    <div *ngIf="loading; else noData" class="lds-dual-ring">Loading...</div>
    <ng-template #noData>
      No data to load.
    </ng-template>
  </ng-template>
</ng-template>

<!-- This is injected into the detail card occupations section -->
<ng-template #occupationsTemplate>
  <div>
    <app-occupations-card-section
      [codes]="this.richSkill?.occupations"
      [isCollapsed]="isOccupationsCollapsed"
    ></app-occupations-card-section>
    <div class="t-margin-extraSmall t-margin-top">
      <button class="t-link" type="button" (click)="isOccupationsCollapsed = !isOccupationsCollapsed">
        <span>View {{isOccupationsCollapsed ? "All" : "Fewer"}} Groups</span>
      </button>
    </div>
  </div>
</ng-template>
